var D={setDelegate:!0};function ae(){D={setDelegate:!0}}function oe(e){var t={},r=B(e),n,a;for(var o in e)n=null,a=null,r&&(n=e.__lookupGetter__(o),a=e.__lookupSetter__(o)),n||a?(n&&t.__defineGetter__(o,n),a&&t.__defineSetter__(o,a)):t[o]=e[o];return t}function _(e){return typeof e<"u"}function d(e){return _(e)&&e!==null}function fe(e){return d(e)&&!U(e)&&!V(e)&&!X(e)}function U(e){return G(e)&&e.length===0}function V(e){return b(e)&&e.length===0}function X(e){return y(e)&&Object.keys(e).length===0}function i(e){return typeof e=="function"}function h(e){return typeof e=="number"}function L(e){return h(e)&&e%1===0}function G(e){return typeof e=="string"||e instanceof String}function le(e){return!!e&&e.nodeType==1}function b(e){return!!e&&e.constructor===Array}function y(e){return!!e&&e.constructor===Object}function ue(e){var t=[];for(var r in e){var n=e[r];e.hasOwnProperty(r)&&!i(n)&&t.push(n)}return t}function ie(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&!i(e[r])&&t.push(r);return t}function se(e){for(var t in e)if(e.hasOwnProperty(t))return!0}function ce(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!0}function B(e){return y(e)&&i(e.__lookupGetter__)&&i(e.__lookupSetter__)&&i(e.__defineGetter__)&&i(e.__defineSetter__)}function ve(e){var t=[];for(var r in e){var n=e[r];e.hasOwnProperty(r)&&i(n)&&t.push(n)}return t}function pe(e){var t={};for(var r in e)e.hasOwnProperty(r)&&!i(e[r])&&(t[e[r]]=r);return t}function k(e){var t=[!0,!0,!0].concat(Array.prototype.slice.call(arguments));return I.apply(null,t)}function I(e,t,r,n){for(var a=r?n||{}:{},o,f=3;f<arguments.length;f++){o=arguments[f];for(var l in o)if(Object.prototype.hasOwnProperty.call(o,l)){var u=o[l];(e||u!=null)&&(t||typeof u!="function")&&(a[l]=u)}}return a}function _e(e){for(var t=0;t<e.length;t++){var r=e[t];D[r]=!0}}function W(e,t,r){var n=!1;if(r=r||!1,e&&t&&e!==t){var a={};Object.keys(t).forEach(function(o){e[o]||(a[o]=!0)}),k(a,D),n=Y(e,t,r?e:null,a)}return n}function Y(e,t,r,n){var a=!1;if(e&&t){n=n||{},r=r||t;var o=function(te,M,re,Ye,ne){var g=function(){return re[ne].apply(te,arguments)};return M&&(g.origFunction=M),g.attachedMethod=!0,g};for(var f in t)if(!(f in n)&&t[f]&&i(t[f])){var l=e[f],u=l&&i(l),c=null;u&&(l.attachedMethod===!0?c=l:c=l.bind(e)),e[f]=o(r,c,t,e,f),a=!0}}return a}function K(e){var t=!1;for(var r in e)if(i(e[r])&&e[r].attachedMethod===!0){var n=e[r].origFunction;if(n)for(;e[r].origFunction;)e[r]=e[r].origFunction,t=!0;else delete e[r]}return t}function de(e,t){var r={};for(var n in e)t[n]&&i(e[n].setDelegate)&&(r[n]=e[n].setDelegate.apply(e[n],[t[n]].concat(Array.prototype.slice.call(arguments,2))));return r}var he=function(t){var r=!1;for(var n in t){var a=t[n];a&&typeof a=="object"&&i(a.setDelegate)&&(r|=K(a))}return!!r};function Ee(e,t){var r=null;if(e&&t&&t.setDelegate){var n={},a;for(a in e)i(e[a])&&e[a].origFunction&&(n[a]=e[a]);r=t.setDelegate(n)}return r}function ye(e,t){var r={};if(e)for(var n=0;n<e.length;n++)r[e[n]]=0;if(t)for(var a=0;a<t.length;a++)r[t[a]]=0;return Object.keys(r)}function w(){return typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof window<"u"?window:{}}var Ke=Object.freeze({__proto__:null,_utResetNonOverridableFunctions:ae,shallowClone:oe,isDefined:_,isDefinedNonNull:d,isDefinedNonNullNonEmpty:fe,isEmptyString:U,isEmptyArray:V,isEmptyObject:X,isFunction:i,isNumber:h,isInteger:L,isString:G,isElement:le,isArray:b,isObject:y,values:ue,keys:ie,hasAnyKeys:se,hasAnyNonNullKeys:ce,hasGetterAndSetterMethods:B,methods:ve,invert:pe,extend:k,copyKeysAndValues:I,addNonOverrideableFunctions:_e,attachMethods:Y,detachMethods:K,attachDelegate:W,setDelegates:de,resetDelegates:he,copyDelegatedFunctions:Ee,dedupedArray:ye,globalScope:w}),A={exponential:{maxWait:1500,initialDelay:100,factor:2}},z=function(e,t,r){this.delay=e||A.exponential.initialDelay,this.maxWait=h(t)?t:A.exponential.maxWait,this.factor=r||A.exponential.factor,this.timeWaited=0};z.prototype.nextDelay=function(){var t=null,r=this.maxWait-this.timeWaited;return r>0&&(this.delay=Math.min(this.delay,r),this.timeWaited+=this.delay),(this.maxWait===0||r>0)&&(t=this.delay,this.delay=this.delay*this.factor),t};function F(e,t,r,n){var a=function(){var f=e.nextDelay();f?setTimeout(F.bind(null,e,t,r,n),f):n.apply(n,arguments)};t.call(t,r,a)}function ge(e,t,r,n,a,o){var f=new z(n,a,o);F(f,e,t,r)}var ze=Object.freeze({__proto__:null,exponentialBackoff:ge});function Ae(e,t,r){var n=void 0;if(_(e))if(_(t)||(t=1024*1024),_(r)||(r=2),h(e)&&h(t)&&t>0&&L(r)&&r>=0){var a=Math.pow(10,r),o=e>0?"floor":"ceil";n=Math[o](e/t/a)*a}else n=NaN;return n}var Fe=Object.freeze({__proto__:null,deResNumber:Ae}),N="0123456789",me=N+"ABCDEF",q=N+"ABCDEFGHIJKLMNOPQRSTUVWXYZ",H=q+"abcdefghijklmnopqrstuvwxy",j=H+"z";function xe(e,t,r){var n=!1;return e&&t&&(e=e.substr(0,t.length),r&&(e=e.toLowerCase(),t=t.toLowerCase()),n=e.indexOf(t)===0),n}function Re(e,t,r){var n=!1;if(e&&t){r&&(e=e.toLowerCase(),t=t.toLowerCase());var a=e.length-t.length;n=a>=0&&e.lastIndexOf(t)===a}return n}function x(e,t,r){var n=null,a="	\n\v\f\r             　\u2028\u2029​",o=new RegExp("^["+a+"]+"),f=new RegExp("["+a+"]+$");if(e)if(!r&&(!t||t==a)&&e.trim)n=e.trim();else{var l=null,u=null,c=null;t&&typeof t<"u"?(t=t.replace(/([.?*+^$[\]\\(){}-])/g,"\\$1"),l="["+t+"]",u=new RegExp("^"+l+"+"),c=new RegExp(l+"+$")):(l=a,u=o,c=f);var p=e.replace(u,"");n=p.replace(c,"")}return n}function $(e,t){var r="";if(e)for(var n=e.toLowerCase().split("_"),a,o=0;o<n.length;o++)a=n[o][0],(o!==0||t)&&(a=a.toUpperCase()),r+=a+n[o].slice(1);return r}function Se(e){return $(e,!0)}function Oe(e){var t="",r="",n=!0;for(var a in e){var o=e[a];(o||o===0||o===!1)&&(t+=r+a+"="+encodeURIComponent(o),n&&(r="&",n=!1))}return t}function De(e,t){return"The function "+e+"."+t+"() must be overridden with a platform-specific delegate function.If you have no data for this function, have your delegate return null or undefined (no 'return')"}function be(e,t){var r=null;t=t||"\\S+";var n=new RegExp("\\b"+t+"/(\\S+)\\b","i"),a=n.exec(e);return a&&a[1]&&(r=a[1]),r}function Ie(e){var t="z",r=Date.now(),n=Math.floor(Math.random()*1e5);return r=r.toString(36).toUpperCase(),n=n.toString(36).toUpperCase(),e+t+r+t+n}function we(e){for(var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r="",n,a=0,o=t.length;a<o;a++)n=t.charAt(a),n==="x"?r+=E(e):n==="y"?r+=E(e,"8","b"):r+=n;return r}function E(e,t,r){var n=w(),a=n.crypto||n.msCrypto,o;return e?o=(e()*16|0).toString(16):a&&a.getRandomValues?o=(a.getRandomValues(new Uint8Array(1))[0]&15).toString(16):a&&a.randomBytes?o=a.randomBytes(1).toString("hex")[0]:o=(Math.random()*16|0).toString(16),t&&r&&(o<t||o>r)&&(o=E(e,t,r)),o}function Ne(e,t){var r="",n=t.length;if(n<=36)r=e.toString(n).toUpperCase();else{for(var a,o,f=[];e>0;)a=e%n,o=t.charAt(a),f.push(o),e=(e-a)/n;r=f.reverse().join("")}return r===""&&(r="0"),r}function Te(e){var t;if(Math.floor(4294967295/256)==16777215){var r=w(),n=r.crypto||r.msCrypto,a,o,f,l,u;if(n&&n.getRandomValues)a=n.getRandomValues(new Uint32Array(16/Uint32Array.BYTES_PER_ELEMENT)),u=!0;else if(n&&n.randomBytes){var c=n.randomBytes(16);a=new Uint32Array(c.buffer,c.byteOffset,c.byteLength/Uint32Array.BYTES_PER_ELEMENT),u=!0}else for(a=new Uint32Array(16/Uint32Array.BYTES_PER_ELEMENT),o=0;o<a.length;o++)a[o]=Math.floor(Math.random()*Math.floor(4294967295));if(a){for(t="",o=0;o<a.length;o++)for(l=a[o],f=0;f<6;f++)t+=j[l%62],l=Math.floor(l/62);e&&(t="1_"+(u?"1":"2")+"_"+t)}}return t}var qe=Object.freeze({__proto__:null,base10Alphabet:N,base16Alphabet:me,base36Alphabet:q,base61Alphabet:H,base62Alphabet:j,startsWith:xe,endsWith:Re,trim:x,snakeCaseToCamelCase:$,snakeCaseToUpperCamelCase:Se,exceptionString:De,paramString:Oe,versionStringFromUserAgent:be,requestId:Ie,uuid:we,randomHexCharacter:E,convertNumberToBaseAlphabet:Ne,cryptoRandomBase62String:Te}),s={setDelegate:function(t){return W(this,t)},cookie:function(){var t;if(typeof window<"u"&&"iTunes"in window&&"cookie"in iTunes)t=iTunes;else if(typeof itms<"u"&&_(itms.cookie))t=itms;else if(typeof document<"u")t=document;else throw"cookies.cookie: No cookie object available";return t.cookie},get:function(t){var r=this.getUnescaped(t);return r&&(r=unescape(r)),r},setUnescaped:function(t,r,n,a,o){},getUnescaped:function(t){var r=null,n=this._getRaw();if(n&&t)for(var a=n.split(";"),o=a.length-1;!r&&o>=0;o--){var f=a[o],l=f.indexOf("=");if(l>0)if(l+1==f.length)r="";else{var u=x(f.substring(0,l));u==t&&(r=x(f.substring(l+1)))}}return r},remove:function(t,r){return this.setUnescaped(t,".",this.EXPIRE_NOW,null,r)},_getRaw:function(){return this.cookie()||""}};s.EXPIRE_NOW=-1;s.EXPIRE_SESSION=null;s.EXPIRE_ONE_SECOND=1;s.EXPIRE_ONE_MINUTE=s.EXPIRE_ONE_SECOND*60;s.EXPIRE_ONE_HOUR=s.EXPIRE_ONE_MINUTE*60;s.EXPIRE_ONE_DAY=s.EXPIRE_ONE_HOUR*24;s.EXPIRE_ONE_WEEK=s.EXPIRE_ONE_DAY*7;s.EXPIRE_ONE_MONTH=s.EXPIRE_ONE_DAY*31;s.EXPIRE_ONE_YEAR=s.EXPIRE_ONE_DAY*365;s.EXPIRE_ONE_SIDEREAL_YEAR=s.EXPIRE_ONE_DAY*365.25;s.EXPIRE_SIX_MONTHS=s.EXPIRE_ONE_DAY*180;var v={},m={},C=function(t){var r={};return typeof t.mtName=="function"&&typeof t.mtVersion=="function"&&(r.name=t.mtName(),r.version=t.mtVersion()),r},R=function(t){var r;return typeof t.mtName=="function"&&typeof t.mtVersion=="function"&&(r=t.mtName()+t.mtVersion()),r};function Pe(e,t){var r=R(e),n=R(t);r&&n&&(v[n]||(v[n]=C(t)),v[r]||(v[r]=C(e),m[r]={}),v[r].delegates?m[r][n]||v[r].delegates.push(v[n]):v[r].delegates=[v[n]],m[r][n]=!0)}function Me(e){return v[R(e)]}var He=Object.freeze({__proto__:null,storeDelegateInfo:Pe,getStoredDelegateObject:Me});function J(e,t,r){var n=t;if(e&&t)for(var a=e.split("."),o=0;n&&o<a.length;o++){var f=a[o];!(f in n)&&r&&(n[f]={}),f in n?n=n[f]:n=null}return n}function S(e){var t=null;if(e&&arguments.length>1)for(var r=Q(Array.prototype.slice.call(arguments,1)),n=r.length-1;n>=0;n--){var a=r[n];if(t=J(e,a),d(t))break}return t}function Ce(e,t){return J(e,t,!0)}function Q(e){var t=[],r=[];r=r.concat(e),arguments&&arguments.length>1&&(r=r.concat(Array.prototype.slice.call(arguments,1)));for(var n=0;n<r.length;n++){var a=r[n];t=t.concat(a)}return t}var je=Object.freeze({__proto__:null,valueForKeyPath:S,createObjectAtKeyPath:Ce,sourcesArray:Q});function O(e){for(var t=[!1,!1,!1].concat(Array.prototype.slice.call(arguments)),r=[],n=0;n<t.length;n++){var a=t[n];if(a&&a.constructor===Array)for(var o=0;o<a.length;o++)r.push(a[o]);else r.push(a)}return I.apply(null,r)}function Ue(e,t,r,n){var a=O(n),o=a;if(e&&t){var f={};if(r||(t=t.filter(function(p){return p in a})),t.length)for(var l=0;l<t.length;l++){var u=t[l],c=e[u];i(c)&&(f[u]=c.call(e,a))}o=O(o,f)}return o}function Ve(e,t,r,n){var a,o,f;if(e&&t&&r)if(o={},a=S(t,r,r.custom),a){var l,u;if(b(a))for(l=0;l<a.length;++l)u=e[a[l]],d(u)&&(o[a[l]]=u);else if(y(a)){for(var c in a)for(l=0;l<a[c].length;++l)if(u=S(a[c][l],e),d(u)){o[c]=u;break}}else f="metrics: incorrect data type provided to applyFieldsMap (only accepts objects and Arrays)"}else f="metrics: unable to get "+t+" section from fieldsMap";else{var p=[];e||p.push("data"),t||p.push("sectionName"),r||p.push("fieldsMap"),f="metrics: missing argument(s): "+p.join(",")+" not provided to applyFieldsMap"}return f&&i(n)&&n(f),o}var $e=Object.freeze({__proto__:null,mergeAndCleanEventFields:O,processMetricsData:Ue,applyFieldsMap:Ve});function Xe(e,t,r){Z(e,"GET",null,t,r)}function Z(e,t,r,n,a,o){var f=new XMLHttpRequest;r=r||void 0,o=o||{},n=i(n)?n:function(){},a=i(a)?a:function(){};var l=o.async!==!1;o.timeout&&l&&(f.timeout=o.timeout),f.onload=function(){f.status>=200&&f.status<300?n(f.response):a(new Error("XHR error: server responded with status "+f.status+" "+f.statusText),f.status)},f.onerror=function(){a(new Error("XHR error"))},f.open(t,e,l),f.withCredentials=typeof o.withCredentials=="boolean"?o.withCredentials:!0,f.setRequestHeader("Content-type","application/json"),f.send(r)}var Je=Object.freeze({__proto__:null,makeAjaxGetRequest:Xe,makeAjaxRequest:Z}),T={STORAGE_TYPE:{LOCAL_STORAGE:"localStorage",SESSION_STORAGE:"sessionStorage"}},ee=function(t){var r=null,n=!1;return function(){return t?r=t:(n||(console.error("storageObject: storage object not found. Override this function if there is a platform-specific implementation"),n=!0),r||(r={storage:{},getItem:function(a){return this.storage[a]},setItem:function(a,o){this.storage[a]=o},removeItem:function(a){delete this.storage[a]}})),r}};function P(e){var t=null,r=null,n=e===T.STORAGE_TYPE.LOCAL_STORAGE;try{r=n?typeof localStorage:typeof sessionStorage,r!=="undefined"?t=n?localStorage:sessionStorage:t=null}catch(a){t=null,console.error("_utils.storage._defaultStorageObject: Unable to retrieve storage object: "+a)}return t}function Le(e){return P(e)}var Ge=ee(P(T.STORAGE_TYPE.LOCAL_STORAGE)),Be=ee(P(T.STORAGE_TYPE.SESSION_STORAGE));function ke(e,t,r){var n=null;if(r)try{e.setItem(t,JSON.stringify(r)),n=r}catch(a){}else n=e.removeItem(t);return n}function We(e,t){var r=null,n=e.getItem(t);if(n)try{r=JSON.parse(n)}catch(a){r=void 0}return r}var Qe=Object.freeze({__proto__:null,_utDefaultStorageObject:Le,localStorageObject:Ge,sessionStorageObject:Be,saveObjectToStorage:ke,objectFromStorage:We});export{qe as a,Fe as b,s as c,He as d,$e as e,ze as f,je as k,Je as n,Ke as r,Qe as s};
//# sourceMappingURL=mt-metricskit-utils-private.esm~DkzakSThTT.js.map
